"use strict";require(["config.min"],function(){require(["jquery","header","aside"],function($,cookie){function template(id,data){var str=$(id).text();str="print(`"+str+"`)",str=str.replace(/<%=(.+)%>/g,"`);print($1);print(`"),str=str.replace(/<%(.+)%>/g,"`);$1print(`");var funstrr='\n\t\t\t(function(data){\n\t\t\t\tvar htmll="";\n\t\t\t\tfunction print(s){\n\t\t\t\t\thtmll+=s;\n\t\t\t\t}\n\t\t\t\t'+str+";\n\t\t\t\treturn htmll;\n\t\t\t})\n\t\t\t",realfun=eval(funstrr),res=realfun(data);return res}function tot(){for(var t=0,e=0;e<$(".tab .totle").length;e++)t+=parseInt($(".tab .totle").eq(e).text().substring(1));$(".pay .fr i").text(t)}var order=cookie.get("order"),order_length;order&&"[]"!=order?($(".no_order").css("display","none"),$(".table,.pay").css("display","block"),order_length=JSON.parse(order).length,$(".table tbody").append(template("#goods",JSON.parse(order)))):($(".no_order").css("display","block"),$(".table,.pay").css("display","none"),order_length=0),$(".header .ul_aboutme li .count").text(order_length),$(".aside .shopping .cart span").text(order_length),$(".tab .tip p i").text(order_length),$(".tab .pay .fr span").text(order_length),$(".input-group-addon").on("click",function(){var t=parseInt($(this).siblings("input").val());"+"==$(this).text()?t+=1:t=1==t?1:t-1,$(this).siblings("input").val(t),$(this).parents(".count").next().text("¥"+t*$(this).parents(".count").prev().text().substring(1)),tot();var e=$(this).parents("tr").index()-1,r=JSON.parse(cookie.get("order"));r[e][4]=t,cookie.set("order",JSON.stringify(r))}),tot(),$(".remove .like").on("click",function(){$(this).toggleClass("active"),"收藏"==$(this).find("i").text()?$(this).find("i").text("已收藏"):$(this).find("i").text("收藏")}),$(".remove .delete").on("click",function(){var t=$(this);$(this).parents("tr").fadeOut(300,function(){t.parents("tr").remove(),tot()});var e=$(this).parents("tr").index()-1,r=JSON.parse(cookie.get("order"));r.splice(e,1),cookie.set("order",JSON.stringify(r));var n=parseInt($(".header .ul_aboutme li .count").text())-1;$(".header .ul_aboutme li .count").text(n),$(".aside .shopping .cart span").text(n),$(".tab .tip p i").text(n),$(".tab .pay .fr span").text(n),0==n&&($(".table,.pay").fadeOut(200),$(".no_order").fadeIn(200))}),$(".pay .fl").on("click",function(){$(".tab .tr:not(:eq(0))").fadeOut(300,function(){$(".tab .tr:not(:eq(0))").remove(),tot()}),cookie.set("order","[]"),$(".header .ul_aboutme li .count").text("0"),$(".aside .shopping .cart span").text("0"),$(".tab .tip p i").text("0"),$(".tab .pay .fr span").text("0"),$(".table,.pay").fadeOut(200),$(".no_order").fadeIn(200)}),$(".footer_con").load("../html/footer.html")})});